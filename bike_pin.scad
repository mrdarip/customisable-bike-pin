use <src/voxel/vx_gray.scad>

$fn=100;
bike_pin(10,5,10,1,6);

module bike_pin(height, iD, oD, thickness, pins){
    difference(){
        //clip
        difference(){
            cylinder(h = height, d=oD);
            cylinder(h = height, d=iD);
        }
            
        
        //insertion hole
        translate([-thickness/2,0,0])
        cube([thickness,oD/2,height]);
    }

    
levels = [
    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 255, 255],
    [255, 255, 0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 255, 255],
    [255, 255, 0, 0, 170, 170, 170, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 0, 0, 255, 255],
    [255, 255, 0, 0, 170, 170, 170, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 0, 0, 255, 255],
    [0, 0, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 0, 0],
    [0, 0, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 0, 0],
    [0, 0, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 0, 0],
    [0, 0, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 85, 85, 0, 0],
    [0, 0, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 85, 85, 0, 0],
    [0, 0, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0],
    [0, 0, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0],
    [0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0],
    [0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0],
    [0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0],
    [0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 85, 85, 0, 0],
    [0, 0, 170, 170, 170, 170, 170, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 170, 170, 170, 170, 170, 85, 85, 0, 0],
    [0, 0, 170, 170, 85, 85, 85, 85, 85, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 85, 85, 85, 85, 85, 85, 85, 0, 0],
    [0, 0, 170, 170, 85, 85, 85, 85, 85, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 85, 85, 85, 85, 85, 85, 85, 0, 0],
    [0, 0, 170, 170, 85, 85, 85, 85, 85, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 85, 85, 85, 85, 85, 85, 85, 0, 0],
    [255, 255, 0, 0, 0, 0, 0, 0, 0, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 0, 0, 0, 0, 0, 0, 0, 255, 255],
    [255, 255, 0, 0, 0, 0, 0, 0, 0, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 0, 0, 0, 0, 0, 0, 0, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 0, 0, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 0, 0, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 0, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 0, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 0, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 0, 0, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255],
    [255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255]
];

    dots = vx_gray(levels, center = true);

    for (dot = dots) {
        rotate([0,0,dot[0][0]*180/len(levels[0])])
        translate([0,oD,dot[0][1]])
        rotate([0,90,90])
        cylinder(h = dot[1]/255, d=1);
    }
    
}